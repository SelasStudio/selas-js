{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/definitions/DiffusionConfig",
    "definitions": {
        "DiffusionConfig": {
            "type": "object",
            "properties": {
                "io": {
                    "$ref": "#/definitions/IOConfig"
                },
                "seed": {
                    "type": "number"
                },
                "steps": {
                    "type": "number"
                },
                "skip_steps": {
                    "type": "number"
                },
                "sampler": {
                    "type": "string",
                    "enum": [
                        "plms",
                        "ddim",
                        "k_lms"
                    ]
                },
                "guidance_scale": {
                    "type": "number"
                },
                "width": {
                    "type": "number"
                },
                "height": {
                    "type": "number"
                },
                "prompts": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Prompt"
                    }
                },
                "init_image": {
                    "$ref": "#/definitions/InputImage"
                },
                "mask": {
                    "anyOf": [
                        {
                            "$ref": "#/definitions/InputImage"
                        },
                        {
                            "$ref": "#/definitions/Prompt"
                        }
                    ]
                },
                "external_guidance": {}
            },
            "additionalProperties": false
        },
        "IOConfig": {
            "type": "object",
            "properties": {
                "image_format": {
                    "type": "string",
                    "enum": [
                        "png",
                        "jpg",
                        "avif",
                        "webp"
                    ]
                },
                "image_quality": {
                    "type": "number"
                },
                "blurhash": {
                    "type": "boolean"
                }
            },
            "additionalProperties": false
        },
        "Prompt": {
            "anyOf": [
                {
                    "$ref": "#/definitions/TextPrompt"
                },
                {
                    "$ref": "#/definitions/ImagePrompt"
                }
            ]
        },
        "TextPrompt": {
            "type": "object",
            "properties": {
                "text": {
                    "type": "string"
                },
                "weight": {
                    "type": "number"
                },
                "concepts": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "cross_attention_editing": {
                    "type": "string"
                },
                "cross_attention_weights": {
                    "type": "string"
                }
            },
            "additionalProperties": false
        },
        "ImagePrompt": {
            "type": "object",
            "properties": {
                "image": {
                    "$ref": "#/definitions/InputImage"
                },
                "weight": {
                    "type": "number"
                },
                "cutout_n": {
                    "type": "number"
                },
                "perceptor": {
                    "type": "string",
                    "enum": [
                        "vit-l",
                        "vit-h",
                        "vit-b",
                        "vit-g"
                    ]
                }
            },
            "additionalProperties": false
        },
        "InputImage": {
            "type": "object",
            "properties": {
                "url": {
                    "type": "string"
                },
                "resize": {
                    "type": "string",
                    "enum": [
                        "crop",
                        "center_crop",
                        "scale"
                    ]
                }
            },
            "required": [
                "url"
            ],
            "additionalProperties": false
        }
    }
}